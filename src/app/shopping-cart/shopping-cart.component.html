<div class="shopping-cart">
    <h2>Shopping Cart</h2>
  
    <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>
  
    <!-- Input and Buttons for Adding Items -->
    <div class="input-container">
      <input
        id="bookCopyId"
        #bookCopyIdInput
        type="text"
        class="input-box"
        placeholder="Enter Book Copy ID"
      />
      <button class="btn add-btn" (click)="addToCartForPurchase(bookCopyIdInput.value)">
        Add for Purchase
      </button>
      <button class="btn borrow-btn" (click)="addToCartForBorrowing(bookCopyIdInput.value)">
        Add for Borrowing
      </button>
    </div>
  
    <!-- Cart Items Table -->
    <table *ngIf="cartItems.length > 0; else emptyCart" class="cart-table">
      <thead>
        <tr>
          <th>Book Copy ID</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of cartItems">
          <td>{{ item.bookCopyId }}</td>
          <td>
            <button class="btn remove-btn" (click)="removeFromCart(item.bookCopyId)">
              Remove
            </button>
          </td>
        </tr>
      </tbody>
    </table>

  
    <!-- Empty Cart Message -->
    <ng-template #emptyCart>
      <p>Your cart is empty.</p>
    </ng-template>
    <button *ngIf="cartItems.length >= 0" (click)="openCheckout()">Proceed to Checkout</button>
<!-- change to >0 to work properly -->
    <!-- Checkout Popup -->
    <div class="popup" *ngIf="showCheckoutPopup">
      <div class="popup-content">
        <h3>Checkout</h3>
        <p>Total: ${{ totalPrice.toFixed(2) }}</p>
  
        <!-- Actions -->
        <div class="actions">
          <button (click)="checkout()">Confirm Checkout</button>
          <button (click)="openCreditCardPopup()">Add Credit Card Details</button>
          <button (click)="closeCheckout()">Cancel</button>
        </div>
        <div *ngIf="addedCreditCard; else noCreditCard">
          <h4>Credit Card Details:</h4>
          <p>Card Holder Name: {{ addedCreditCard.cardHolderName }}</p>
          <p>Card Number: {{ addedCreditCard.cardNumber }}</p>
          <p>Expiry Date: {{ addedCreditCard.expiryDate }}</p>
        </div>

        <ng-template #noCreditCard>
          <p>No credit card added.</p>
        </ng-template>


          <!-- Credit Card Popup -->
    <div class="popup" *ngIf="showCreditCardPopUp">
      <div class="popup-content">
        <h3>Add Credit Card</h3>
        <form (ngSubmit)="addCreditCard()">
          <label for="creditCardId">Credit Card ID:</label>
          <input
            type="string"
            id="creditCardId"
            [(ngModel)]="creditCard.creditCardId"
            name="creditCardId"
            required
          />

        <label for="cardNumber">Card Number:</label>
        <input
          type="string"
          id="cardNumber"
          [(ngModel)]="creditCard.cardNumber"
          name="cardNumber"
          required
        />

        <label for="cardHolderName">Card Holder Name:</label>
        <input
          type="string"
          id="cardHolderName"
          [(ngModel)]="creditCard.cardHolderName"
          name="cardHolderName"
          required
        />

        <label for="expiryDate">Expiry Date (YYYY):</label>
        <input
          type="string"
          id="expiryDate"
          [(ngModel)]="creditCard.expiryDate"
          name="expiryDate"
          required
        />

        <label for="cvv">CVV:</label>
        <input
          type="string"
          id="cvv"
          [(ngModel)]="creditCard.cvv"
          name="cvv"
          required
        />

        <div class="actions">
          <button type="submit">Add Card</button>
          <button type="button" (click)="closeCreditCardPopup()">Cancel</button>
        </div>
      </form>
    </div>
  </div>
      </div>
    </div>
  </div>
  